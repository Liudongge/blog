(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{428:function(t,e,r){"use strict";r.r(e);var a=r(20),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"h5截屏及屏幕录制解决方案"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#h5截屏及屏幕录制解决方案"}},[t._v("#")]),t._v(" H5截屏及屏幕录制解决方案")]),t._v(" "),r("h3",{attrs:{id:"h5截屏"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#h5截屏"}},[t._v("#")]),t._v(" H5截屏")]),t._v(" "),r("h5",{attrs:{id:"开源包-html-to-image"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#开源包-html-to-image"}},[t._v("#")]),t._v(" 开源包："),r("a",{attrs:{href:"https://github.com/bubkoo/html-to-image",target:"_blank",rel:"noopener noreferrer"}},[t._v("html-to-image"),r("OutboundLink")],1)]),t._v(" "),r("h5",{attrs:{id:"原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理：")]),t._v(" "),r("p",[t._v("将dom节点转换成canvans或svg，再生成图片文件。生成的文件包含base64-encoded的url，blob格式的文件流等格式。")]),t._v(" "),r("h5",{attrs:{id:"交互方案支持"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#交互方案支持"}},[t._v("#")]),t._v(" 交互方案支持：")]),t._v(" "),r("ol",[r("li",[t._v("前端对当前页面直接生成常用格式图片（svg、png、jpeg等）")]),t._v(" "),r("li",[t._v("前端对当前页面生成的文件流上传到服务端存储")]),t._v(" "),r("li",[t._v("其他需要进行二次加工的交互：如选择页面部分dom进行截屏")])]),t._v(" "),r("h3",{attrs:{id:"h5屏幕录制"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#h5屏幕录制"}},[t._v("#")]),t._v(" H5屏幕录制")]),t._v(" "),r("h5",{attrs:{id:"开源包-rrweb"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#开源包-rrweb"}},[t._v("#")]),t._v(" 开源包："),r("a",{attrs:{href:"https://github.com/rrweb-io/rrweb/blob/master/README.zh_CN.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("rrweb"),r("OutboundLink")],1)]),t._v(" "),r("h5",{attrs:{id:"原理-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#原理-2"}},[t._v("#")]),t._v(" 原理：")]),t._v(" "),r("ol",[r("li",[t._v("录制：通过对事件的记录和页面快照的保存，将页面交互存储到eventlog中。该eventlog为数组格式的记录，一个动作可能包含数十条记录。")]),t._v(" "),r("li",[t._v("回放：通过 iframe 沙盒功能重建dom树，结合计时器将eventlog顺序执行。展现出类似于视频的效果。")])]),t._v(" "),r("h5",{attrs:{id:"交互方案支持-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#交互方案支持-2"}},[t._v("#")]),t._v(" 交互方案支持：")]),t._v(" "),r("ol",[r("li",[t._v("控制开始录制和停止录制，将生成的eventlog存储。预览页面调用eventlog做回放。\n订单贷开发服务器：白名单企业查询页面「开始录制」「结束录制」「重放操作记录」\n地址：http://10.145.5.25:30020/\n账号：13261880001\n密码：asd123123")]),t._v(" "),r("li",[t._v("使用开源包"),r("a",{attrs:{href:"https://github.com/tungs/timecut",target:"_blank",rel:"noopener noreferrer"}},[t._v("timecut"),r("OutboundLink")],1),t._v("（通过puppeteer将eventlog重放，再使用FFmpeg对回放进行录制）将eventlog生成mp4格式视频。演示视频：http://lab.myriptide.com/syncit-demo/record-2020-08-17_23.00.55.mp4")])]),t._v(" "),r("h5",{attrs:{id:"ps"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ps"}},[t._v("#")]),t._v(" PS：")]),t._v(" "),r("p",[t._v("由于使用 "),r("code",[t._v("MutationObserver")]),t._v(" API，rrweb 不支持 IE11 以下的浏览器。谷歌、火狐、app内嵌webview基本都是支持的。")])])}),[],!1,null,null,null);e.default=s.exports}}]);