(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{423:function(v,_,e){"use strict";e.r(_);var t=e(20),o=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("p",[v._v("记录element-ui的坑：")]),v._v(" "),e("p",[v._v("适用el-select的clearable功能时，在开发环境清空时数据正常，为’’。但是在测试环境（打包后），清空时的数据类型为object，值为null。")]),v._v(" "),e("p",[v._v("2019年11月12日15:11:41")]),v._v(" "),e("p",[v._v("使用px=>vw的转换时，行内样式是不会做转换的")]),v._v(" "),e("p",[v._v("2019年11月13日15:07:31")]),v._v(" "),e("p",[v._v("validate一定要有callback()")]),v._v(" "),e("p",[v._v("2019年11月19日15:11:46")]),v._v(" "),e("p",[v._v("ios下img标签设置宽度时出现异常，图片不显示：")]),v._v(" "),e("ol",[e("li",[v._v("img{}样式")]),v._v(" "),e("li",[v._v("class中设置width为固定值")])]),v._v(" "),e("p",[v._v("解决方案：")]),v._v(" "),e("ol",[e("li",[v._v("使用行内样式")]),v._v(" "),e("li",[v._v('给父级标签设置宽度，img标签设置width=“100%"')])]),v._v(" "),e("p",[v._v("2019年11月25日11:16:08")]),v._v(" "),e("p",[v._v("解决 vue 项目一直出现 sockjs-node/info?t=1554978**** ，并造成浏览器不能及时更新编码改动结果")]),v._v(" "),e("p",[v._v("https://blog.csdn.net/gulang03/article/details/89217273")]),v._v(" "),e("p",[v._v("2020年03月03日21:04:15")]),v._v(" "),e("p",[v._v("若要同时使用私服及新版element-ui：")]),v._v(" "),e("p",[v._v("1.引入element-ui包")]),v._v(" "),e("ol",{attrs:{start:"2"}},[e("li")]),v._v(" "),e("p",[v._v("在babel.config.js的plugins中添加：")]),v._v(" "),e("p",[v._v("[")]),v._v(" "),e("p",[v._v("'component',")]),v._v(" "),e("p",[v._v("{")]),v._v(" "),e("p",[v._v("libraryName: 'element-ui',")]),v._v(" "),e("p",[v._v("styleLibraryName: 'theme-chalk'")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("],")]),v._v(" "),e("p",[v._v("3.main.js中按需引入需要用到的组件")]),v._v(" "),e("p",[v._v("import { Tabs } from 'element-ui'Vue.use(Tabs)")]),v._v(" "),e("p",[v._v("2020年03月06日17:11:36")]),v._v(" "),e("p",[v._v("文件下载在不同返回值下，前端的处理方式：")]),v._v(" "),e("p",[v._v("一、静态文件服务器：")]),v._v(" "),e("p",[v._v("window.open(url)直接打开即可预览或下载，由浏览器默认规则决定")]),v._v(" "),e("p",[v._v("二、接口以字节流的形式返回：（只能下载）")]),v._v(" "),e("p",[v._v("response的content-type为"),e("strong",[v._v("application/octet-stream")]),v._v("时，即通知浏览器是字节流，触发浏览器的下载操作。")]),v._v(" "),e("p",[v._v("另外Content-Disposition响应头有相关处理影响浏览器加载。（multipart/form-data类型应答消息体）")]),v._v(" "),e("p",[v._v("Content-Disposition响应头指示回复的内容以何种形式展示。inline内联形式即网页或页面的一部分，attachment即附件形式下载并保存本地。")]),v._v(" "),e("p",[v._v("返回http信息如下：")]),v._v(" "),e("p",[v._v("使用的方法如下：")]),v._v(" "),e("p",[v._v("/**")]),v._v(" "),e("p",[v._v("* 下载文件，使用obs文件存储，接口返回content-type为application/octet-stream")]),v._v(" "),e("p",[v._v("* @param {String} fileUrl 文件下载接口及参数")]),v._v(" "),e("p",[v._v("*/")]),v._v(" "),e("p",[v._v("export function fileDownload(fileUrl) {")]),v._v(" "),e("p",[v._v("const a = document.createElement('a')")]),v._v(" "),e("p",[v._v("const $body = document.body")]),v._v(" "),e("p",[v._v("a.href = "),e("code",[v._v("${window.location.origin}${process.env.VUE_APP_BASE_API}/${fileUrl}")])]),v._v(" "),e("p",[v._v("a.style.display = 'none'")]),v._v(" "),e("p",[v._v("$body.appendChild(a)")]),v._v(" "),e("p",[v._v("a.click()")]),v._v(" "),e("p",[v._v("$body.removeChild(a)")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("这里fileUrl为文件下载时的接口关键字。如 '/file/download?id=111'。由于接口已经存入了filename信息，因此无需重设文件名。")]),v._v(" "),e("p",[v._v("三、接口文件流返回，content-type为文件类型。")]),v._v(" "),e("p",[v._v("实现下载的方式：")]),v._v(" "),e("p",[v._v("前端通过设置responseType为blob，并生成objectUrl赋值给a标签，以a标签的点击事件来触发下载。其中a标签的download属性可以赋值name来决定下载下来的文件名称，可以实现重命名的效果。注意该属性IE不支持。")]),v._v(" "),e("p",[v._v("代码如下：")]),v._v(" "),e("p",[v._v("/**")]),v._v(" "),e("p",[v._v("* 下载并重命名文件")]),v._v(" "),e("p",[v._v("* @param {String} fileUrl 除去ip端口前缀的文件路径")]),v._v(" "),e("p",[v._v("* @param {*} fileName 要设置的文件名称")]),v._v(" "),e("p",[v._v("*/")]),v._v(" "),e("p",[v._v("export function formatFileName(fileUrl, fileName) {")]),v._v(" "),e("p",[v._v("getFile('/fileApi/' + fileUrl, 'blob').then(function (blobContent) {")]),v._v(" "),e("p",[v._v("const blob = new Blob([blobContent], {")]),v._v(" "),e("p",[v._v("type: blobContent.type")]),v._v(" "),e("p",[v._v("})")]),v._v(" "),e("p",[v._v("const dom = document.createElement('a')")]),v._v(" "),e("p",[v._v("dom.download = fileName")]),v._v(" "),e("p",[v._v("dom.style.display = 'none'")]),v._v(" "),e("p",[v._v("dom.href = URL.createObjectURL(blob)")]),v._v(" "),e("p",[v._v("document.body.appendChild(dom)")]),v._v(" "),e("p",[v._v("dom.click()")]),v._v(" "),e("p",[v._v("document.body.removeChild(dom)")]),v._v(" "),e("p",[v._v("})")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("如果要预览的话，")]),v._v(" "),e("p",[v._v("可以通过window.open(requestUrl)来打开新tab进行预览，或者通过iframe生成对应的标签，并将本地下载的缓存文件url赋值给标签以实现预览。")]),v._v(" "),e("p",[v._v("window.open()的方式在cookie中放入token，新tab在同域下可以共享cookie，后端通过cookie中的token来验权。")]),v._v(" "),e("p",[v._v("代码如下：")]),v._v(" "),e("p",[v._v("/**")]),v._v(" "),e("p",[v._v("* 预览文件，使用obs文件存储，接口返回文件流，通过存入cookie的token进行验权")]),v._v(" "),e("p",[v._v("* @param {String} fileUrl 文件预览接口及参数")]),v._v(" "),e("p",[v._v("*/")]),v._v(" "),e("p",[v._v("export function filePreview(fileUrl) {")]),v._v(" "),e("p",[v._v("window.open("),e("code",[v._v("${window.location.origin}${process.env.VUE_APP_BASE_API}/${fileUrl}")]),v._v(")")]),v._v(" "),e("p",[v._v("}")]),v._v(" "),e("p",[v._v("使用流的优势：验权。通过将Authorization放在请求头、以及cookie中，以解决通过a标签下载以及window.open()来预览和下载时的验权问题")]),v._v(" "),e("p",[v._v("2020年03月15日08:40:24")]),v._v(" "),e("p",[v._v("前端路由权限控制")]),v._v(" "),e("p",[v._v("GenerateRoutes")]),v._v(" "),e("p",[v._v("router.addRoutes(accessRoutes)")]),v._v(" "),e("p",[v._v("2020年10月24日12:40:49")]),v._v(" "),e("p",[v._v("element-ui 穿梭框 传值 必须有label字段，否则会报错")]),v._v(" "),e("p",[v._v("2020年10月27日09:55:52")]),v._v(" "),e("p",[v._v("el-tabs-panel中使用v-show不生效，只能使用v-if")]),v._v(" "),e("p",[v._v("2020年10月30日09:48:21")]),v._v(" "),e("p",[v._v("解决xss攻击：CSP")]),v._v(" "),e("p",[v._v("配置内容：")]),v._v(" "),v._v('//xtzj.ici-sc.com/" target="_blank" rel="noopener noreferrer">http://xtzj.ici-sc.com'),e("OutboundLink"),v._v(" "),e("a",{attrs:{href:"https://xtzj.ici-sc.com/",target:"_blank",rel:"noopener noreferrer"}},[v._v("https://xtzj.ici-sc.com"),e("OutboundLink")],1),v._v(";"),e("p"),v._v(" "),e("p",[v._v("img-src * 'self' data:;")]),v._v(" "),e("p",[v._v("style-src * 'self' 'unsafe-inline';")]),v._v(" "),e("p",[v._v("media-src *;")]),v._v(" "),e("p",[v._v("connect-src 'self' 'unsafe-inline' 'unsafe-eval' "),e("a",{attrs:{href:"http://xtzj.ici-sc.com/",target:"_blank",rel:"noopener noreferrer"}},[v._v("http://xtzj.ici-sc.com"),e("OutboundLink")],1),v._v(" "),e("a",{attrs:{href:"https://xtzj.ici-sc.com/",target:"_blank",rel:"noopener noreferrer"}},[v._v("https://xtzj.ici-sc.com"),e("OutboundLink")],1),v._v(";")]),v._v(" "),e("p",[v._v("manifest-src 'self';\">")]),v._v(" "),e("p",[v._v("2020年11月09日16:00:23")]),v._v(" "),e("ol",[e("li",[v._v("使用elementui的dialog组件时，如果要使用右上角关闭按钮的show-close功能，则需要对dialogVisible使用.sync修饰符。")]),v._v(" "),e("li",[v._v("如果要在element基础上封装新的dialog组件，则不能使用sync修饰符，原因是影响新组件及父组件之间的单向数据流。因此封装了的新组建不能使用右上角关闭按钮功能。")])])],1)}),[],!1,null,null,null);_.default=o.exports}}]);